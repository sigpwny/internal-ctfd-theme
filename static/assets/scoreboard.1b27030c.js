import{d as g,c as y,m as d,C as i}from"./index.7e48942e.js";import{c as f,m as v,e as w}from"./index.b6afda34.js";import"./echarts.128204f2.js";function x(o,t,n){let s={title:{left:"center",text:"Top 10 "+(o==="teams"?"Teams":"Users")},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{type:"scroll",orient:"horizontal",align:"left",bottom:35,data:[]},toolbox:{feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{}}},grid:{containLabel:!0},xAxis:[{type:"time",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],dataZoom:[{id:"dataZoomX",type:"slider",xAxisIndex:[0],filterMode:"filter",height:20,top:35,fillerColor:"rgba(233, 236, 241, 0.4)"}],series:[]};const e=Object.keys(t);for(let a=0;a<e.length;a++){const c=[],p=[];for(let r=0;r<t[e[a]].solves.length;r++){c.push(t[e[a]].solves[r].value);const l=g(t[e[a]].solves[r].date);p.push(l.toDate())}const u=f(c);let h=p.map(function(r,l){return[r,u[l]]});s.legend.data.push(t[e[a]].name);const b={name:t[e[a]].name,type:"line",label:{normal:{position:"top"}},itemStyle:{normal:{color:y(t[e[a]].name+t[e[a]].id)}},data:h};s.series.push(b)}return n&&(s=v(s,n)),s}window.Alpine=d;window.CTFd=i;async function k(o,t=null){const n=t?`/api/v1/scoreboard/top/${o}?bracket_id=${t}`:`/api/v1/scoreboard/top/${o}`;return(await(await i.fetch(n,{method:"GET"})).json()).data}const m=window.scoreboardUpdateInterval||3e5;d.data("ScoreboardDetail",()=>({data:{},show:!0,activeBracket:null,async update(){this.data=await k(10,this.activeBracket);let o=window.scoreboardChartOptions,t=x(i.config.userMode,this.data,o);w(this.$refs.scoregraph,t),this.show=Object.keys(this.data).length>0},async init(){this.update(),setInterval(()=>{this.update()},m)}}));d.data("ScoreboardList",()=>({standings:[],brackets:[],activeBracket:null,async update(){const t=await(await i.fetch(`/api/v1/brackets?type=${i.config.userMode}`,{method:"GET"})).json();this.brackets=t.data,this.standings=await i.pages.scoreboard.getScoreboard()},async init(){this.update(),setInterval(()=>{this.update()},m)}}));d.start();
